---
layout:     post
title:      "8088微处理器"
subtitle:   "微机系统与接口期末复习"
date:       2019-12-2 10:00:00
author:     "zl"
header-img: "img/post-bg-2019.jpg"
tags:
    - 期末复习系列
---

### 特点

- 采用并行流水线工作方式(CPU内部结构)
   —— 通过设置指令预取队列实现
- 对内存空间实行分段管理(存储器寻址)
   —— 将内存分为4个段并设置地址段寄存器，以实现对1MB空间的寻址
- 支持多处理器系统(工作模式)

#### 两种工作模式
- 最小模式：最小模式为单处理器模式，所有控制信号由微处理器产生。
  - MX/MN非=0
  

![avatar](/img/in-post/2019-12-23-weiji/12-23-weij.PNG)


- 最大模式：最大模式为多处理器模式，部分控制信号由外部总线控制产生。
  - MX/MN非=1

![avatar](/img/in-post/2019-12-23-weiji/12-23-weiji1.PNG)


### 主要引线

8088最小模式下的主要引脚信号  - 4组

- 完成一次访问内存或接口所需要的主要信号
- 与外部同步控制信号
- 中断请求和响应信号
- 总线保持和响应信号


1. 主要引线

    地址线和数据线：
    1. AD0—AD7：低8位地址和低8位数据信号分时复用。在传送地址信号时为单向，传送数据信号时为双向。
    2. A16--A19：高4位地址信号，与状态信号分时复用。
    3. A8—A15 ：8位地址信号

2. 主要的控制和状态信号
     
    - WR：  写信号；
    - RD：  读信号；
  
    - IO/M：为“0”表示访问内存，
            为“1”表示访问接口；
    - DEN： 低电平有效时，允许进行读/写操作；

    - DT/R：数据收发器的传送方向控制； 
    - ALE：地址锁存信号；
    - RESET：复位信号。

3. 中断请求和响应信号

    - INTR：可屏蔽中断请求输入端
    - NMI： 非屏蔽中断请求输入端
    - INTA：中断响应输出端

4. 总线保持信号

   -  HOLD：总线保持请求信号输入端。当CPU以外的其他设备要求占用总线时，通过该引脚向CPU发出请求。  
    - HLDA：总线保持响应信号输出端。CPU对 HOLD信号的响应信号。



            8088和8086的区别
            数据总线宽度不同
            8088的外部总线宽度是8位，8086为16位。
            访问存储器和输入输出控制信号含义不同
            8088——IO/M=0表示访问内存；
            8086——IO/M=1表示访问内存。

### 内部结构

- 执行单元(EU)
  - 组成：运算器，8个通用寄存器，1个标志寄存器，EU部分控制电路
  - 功能：指令译码，指令执行，暂存中间运算结果，保存运算结果特征

- 总线接口单元(BIU)
  - 功能：
    - 从内存中取指令到指令预取队列
    - 指令预取队列是并行流水线工作的基础
    - 负责与内存或输入/输出接口之间的数据传送
    - 在执行转移程序时，BIU使指令预取队列复位，从指定的新地址取指令，并立即传给执行单元执行。

*指令预取队列*的存在使EU和BIU两个部分可同时进行工作，从而：*提高了CPU的效率；降低了对存储器存取速度的要求*

### 内部寄存器

含14个16位寄存器，按功能可分为三类
- 8个通用寄存器：数据寄存器，地址指针寄存器，变址寄存器
- 4个段寄存器：CS,DS,ES,SS
- 2个控制寄存器

#### 通用寄存器
数据寄存器：AX,BC,CX,DX(16位)/AH，AL,BH,BL,CH,CL,DH,DL(8位)

- AX：累加器。
所有I/O指令都通过AX与接口传送信息，中间运算结果也多放于AX中；
- BX：基址寄存器。
在间接寻址中用于存放基地址；
- CX：计数寄存器。
用于在循环或串操作指令中存放计数值；
- DX：数据寄存器。
在间接寻址的I/O指令中存放I/O端口地址；在32位乘除法运算时，存放高16位数。

地址寄存器：
- SP：
堆栈指针寄存器，其内容为栈顶的偏移地址；
- BP：
基址指针寄存器，常用于在访问内存时存放内存单元的偏移地址。

*作为基址寄存器，用BX表示所寻找的数据在数据段；用BP则表示数据在堆栈段。*

变址寄存器
- 变址寄存器在指令中常用于存放数据在内存中的地址。
- SI：源变址寄存器
- DI：目标变址寄存器

#### 控制寄存器

- IP
指令指针寄存器，其内容为下一条要执行指令的偏移地址。
- FLAGS
标志寄存器，存放运算结果的特征
   - 6个状态标志位（CF，SF，AF，PF，OF，ZF）
   - 3个控制标志位（IF，TF，DF）

      - CF（Carry Flag） 
      进位标志位。加(减)法运算时，若最高位有进(借)位则CF=1 
      - PF（Parity Flag）
      奇偶标志位。运算结果的低8位中“1”的个数为偶数时PF=l 
      - AF（Auxiliary Carry Flag）
      辅助进位标志位。加(减)操作中，若Bit3向Bit4有进位(借位)，AF=1 

      - ZF（Zero Flag）
      零标志位。当运算结果为零时ZF=1 
      - SF（Sign Flag）
      符号标志位。当运算结果的最高位为1时，SF=l 
      - OF（Overflow Flag）
      溢出标志位。当算术运算的结果超出了有符号数的可表达范围时，OF=l 


      ![avatar](/img/in-post/2019-12-23-weiji/12-23-weiji2.PNG)

      - TF（Trap Flag）
      陷井标志位，也叫跟踪标志位。TF=1时，使CPU处于单步执行指令的工作方式。

      - IF（Interrupt Enable Flag）
      中断允许标志位。IF=1使CPU可以响应可屏蔽中断请求。
      - DF（Direction Flag）
      方向标志位。在数据串操作时确定操作的方向。 


#### 段寄存器

- CS
代码段寄存器，存放代码段的段基地址。
- DS
数据段寄存器 ，存放数据段的段基地址。
- ES
附加段寄存器，存放数据段的段基地址。
- SS
堆栈段寄存器， 存放堆栈段的段基地址


### 存储器寻址

#### 存储器编址

- 段基地址：
指示存储单元在整个内存空间中处于哪个区域
- 相对地址（偏移地址）
决定该存储单元相对段内第一个单元的距离
- 逻辑段的起始地址称为段首：
每个逻辑段内的第一个单元->段首偏移地址=0

 ![avatar](/img/in-post/2019-12-23-weiji/12-23-weiji3.PNG)

 **物理地址=段基地址*16+偏移地址**

    eg:设某操作数存放在数据段，DS=250AH，数据所在单元的偏移地址=0204H。
    则该操作数所在单元的物理地址为：
    
    250AH ×16+0204H = 252A4H

#### 逻辑段和逻辑地址

内存的分段是逻辑分段，不是物理段。各个逻辑段地址上可以不相连、可以部分重合、也可以完全重合。    

每个内存单元具有唯一物理地址，但可能具有多个逻辑地址。即：  
- 一个内存单元可以同时处于两个逻辑段
- 一个内存单元可以在不同的时刻属于相同或不同类型的段
- 一个内存单元在同一时刻可以属于不同类型的段

#### 堆栈及堆栈段的使用

![avatar](/img/in-post/2019-12-23-weiji/12-23-weiji4.PNG)

#### 总结：

- 全部为16位寄存器

- 全部通用寄存器中，只有AX和CX中的内容一定为参加运算的数据，其余通用寄存器中的内容可能是数据，也可能是存放数据的地址；

- SP中的内容通常为堆栈段的栈顶地址；
- 段寄存器中的内容为相应逻辑段的段地址；
- IP中的内容为下一条要取的指令的偏移地址；


### 总线时序

- 时序：
CPU各引脚信号在时间上的关系
- 总线周期：
CPU完成一次访问内存（或接口）操作所需要的时间。
一个总线周期至少包括4个时钟周期。

![avatar](/img/in-post/2019-12-23-weiji/12-23-weiji5.png)

1. T1状态
2. M/IO信号有效，指出写内存还是I/O； 
3. 地址输出：分 高4位和 低16位； 
4. ALE输出 地址锁存信号； 
5. BHE信号表示高8位数据总线上信息可用。 
6. T2状态：CPU往AD15-AD0 发出数据； 
7. T3状态：CPU继续提供状态信息和数据； 
8. Tw状态：在存储器和外设速度较慢时，还要在T3之后插入一个或几个Tw。 
9. T4状态：CPU撤除信息。

8088可工作于两种模式下
- 最小模式为单处理器模式，控制信号较少，一般可不必接总线控制器。
- 最大模式为多处理器模式，控制信号较多，须通过总线控制器与总线相连。




























 


