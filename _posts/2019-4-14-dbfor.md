---
layout:     post
title:      "数据库 关系数据库方法"
subtitle:   "DATABASE"
date:       2019-04-14 10:00:00
author:     "zl"
header-img: "img/post-bg2-2019.jpg"
tags:
    - 数据库
---

## 关系数据库的基本概念

### 关系的形式化定义
1. 关系的集合表示 ：     
一个关系由若干个不同元组组成。  
一个关系可以看成是元组的集合。  
关系中每个属性都有其相应的取值范围，即域   

2. 关键码和表之间的联系：   
   - 超码（超键）     
  在一个关系中，能惟一标识元组但含有多余属性的属性组合，称为关系的超键。    
   - 候选码（候选键）   
   如果一个属性组能唯一标识元组，且又不含有多余的属性，那么这个属性组称为关系的候选键。        
   - 主码（主键）      
  若一个关系中有多个候选键，则选其中的一个为关系的主键。    

    >“职工编号”、“身份证号”可以作候选码。   
    关系的候选码可以有多个，但不能同时使用，只能使用一个，譬如使用“职工编号”来标识职工，那么“职工编号”就是主码了。

    - 外码（又称外键）  
    若一个关系R中包含有另一个关系S的主码所对应的属性集F,则称F为R的外码。    
    并称关系S为被参照关系或目标关系，关系R为依赖关系或参照关系。

    > 如职工（职工编号，姓名，部门编号，性别）  
    部门（部门编号，部门名称，部门经理）    
    则称 职工关系中，职工编号为主键，部门关系中，部门编号为主键。部门编号是它的外键。

### 关系模式，关系子模式，存储模式

### 关系模型的完整性规则

1. 实体完整性规则 ：关系中元组的主键不能为空。  
如：选课关系模式SC(SNO, CNO, SCORE)，其主码由SNO，CNO组成，因此，SNO和CNO的取值都不能为空。 

2. 参照完整性规则 ：外键必须是另一个表的主键的有效值，或者是一个空值。

    - 外键和相对应的主键可以不同名，只要定义在相同的值域上即可。
    - R1，R2也可以是同一个关系模式，表示了同一个关系中的不同元组之间的关系。    

    > 学生（学号，姓名，性别，专业号，年龄）  
    专业（专业号，专业名）  
    学生关系中每个元组的“专业号”属性只能取以下两种值：  
    （1）空值，表示尚未给该学生分配专业     
    （2）非空值，这时该值必须是专业关系中某个元组的“专业号”值，表示该学生不可能分配到一个不存在的专业中

3. 用户完整性规则：由应用环境而定。如成绩应大于0等。

### 关系库数据模式

 一个关系数据库是多个关系的集合，这些具体关系构成了关系数据库的实例。由于每个关系都有一个模式，所以，构成该关系数据库的所有关系模式的集合构成了关系数据库模式。
 
例如，一个学生选课数据库系统的模式有下面三个关系模式构成：    
        S(SNO，SNAME，SEX，AGE，DNAME)
        C(CNO，CNAME，PRE_CNO)
        SC(SNO，CNO，SCORE

## 关系代数

### 关系运算的五个基本操作

1. 并运算   
   R和S有着**相同的关系模式**

   编号|品名|数量
    --|----|------
   001|冰箱|2   
   002|彩电|1   

    编号|品名|数量
     --|----|----|
   003|空调|2   
   002|微波炉|1   

    编号|品名|数量
     --|----|------
   001|冰箱|2   
   002|彩电|1   
   003|空调|2   
   002|微波炉|1     

2. 差运算
   R和S有着**相同的元数**，对应的属性取自**同一个域**。

   考生号|
   |---|
   001|
   002|
   003|

   考生号|
   ----
   001|

   考生号|
   ----|
   002|
   003|

3. 笛卡尔积 
   两个关系的合并操作，可以用笛卡尔积。笛卡尔积运算可用于两张表的横向合并。

    DEPT|DNAME|DTASK
    --|----|------
    1|技术部|产品设计
    2|市场部|产品销售

    E|NAME|SALARY|AGE
    --|----|------|--
    01|王菲|4000|22
    02|巴巴|5000|23

    E|NAME|SALARY|AGE|DEPT|DNAME|DTASK
    --|----|------|--|----|-----|-----
    01|王菲|4000|22|1|技术部|产品设计
    01|王菲|4000|22|2|市场部|产品销售
    02|巴巴|5000|23|1|技术部|产品设计
    02|巴巴|5000|23|2|市场部|产品销售

4. 选择运算 
   根据某些条件，对关系做水平切割。即在一个关系内选择符合条件的元组。

    E|NAME|SALARY|AGE|DEPT|DNAME|DTASK
    --|----|------|--|----|-----|-----
    01|王菲|4000|22|1|技术部|产品设计
    02|巴巴|5000|23|1|技术部|产品设计

    SALARY>4500^AGE>22
    E|NAME|SALARY|AGE|DEPT|DNAME|DTASK
    --|----|------|--|----|-----|-----
    02|巴巴|5000|23|1|技术部|产品设计

5. 投影运算
    对一个关系进行垂直切割

    E|NAME|SALARY|AGE|DEPT|DNAME|DTASK
    --|----|------|--|----|-----|-----
    01|王菲|4000|22|1|技术部|产品设计
    02|巴巴|5000|23|1|技术部|产品设计

    E,NAME
    E|NAME|
    --|----|
    01|王菲|
    02|巴巴|

    投影运算时，会去掉重复值

     E|NAME|SALARY|AGE|DEPT|DNAME|DTASK
    --|----|------|--|----|-----|-----
    01|王菲|4000|22|1|技术部|产品设计
    01|王菲|4000|22|2|市场部|产品销售
    02|巴巴|5000|23|1|技术部|产品设计
    02|巴巴|5000|23|2|市场部|产品销售

    





    




   


   



